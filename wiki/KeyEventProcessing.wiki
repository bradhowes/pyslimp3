#summary Pyslimp3 key event processing
#labels Phase-Design
= Event Flow =

An instance of the Server class receives all messages from a SLiMP3 device. Those that start with an 'i' character (for infrared or IR) contain data that describes the key event from the remote control. The Server class uses an instance of the IR class to translate native remote codes into semi-abstract key codes defined in KeyProcessor.py. If there is a valid key translation, the Server instance forwards the event timestamp and translated key value to the appropriate Client instance's {{{processKeyEvent()}}} method.

The Client {{{processKeyEvent()}}}} method hands off the key event data to its KeyProcessor instance which performs filtering of raw key events into more useful keycodes that describe not just the key that was pressed, but  also a temporal descriptor that better describes the key even in terms of others that have appeared before it. For instance, when one first presses the right-arrow key on the remote, the KeyProcessor's process() method will emit a keycode with the value of {{{kArrowRight.kModFirst}}}. If the key is held down for a certain amount of time ({{{KeyProcessor.kHoldPressThreshold}}}), the KeyProcessor emits the keycode {{{kArrowRight.kModHeld}}}, and if the key continues to be held down it will emit repeated {{{kArrowRight.kModRepeat}}} keycodes. Finally, when the KeyProcessor's checkForRelease() method determines that the key is no longer held down, the KeyProcessor will emit one of two keycodes, {{{kArrowRight.kModRelease}}} or {{{kArrowRight.kModReleaseHeld}}} depending on whether the key had been held down longer than the {{{KeyProcessor.kHoldPressThreshold}}}) duration.

== Browser Keys ==

|| *Key Code* || *Action* ||
|| kArrowUp || previous value ||
|| kArrowDown || next value ||
|| kArrowLeft || previous Browser instance ||
|| kArrowRight || new Browser instance for the current value ||
|| kDigit0 - kDigit9 || if the number of items being browsed is less than 11, use the digit (with 0 == 10) as an index of the item to show. Otherwise, use TelephoneKeypadProcessing to obtain a letter or digit, and then show the first item being browsed that starts with it. ||

